{"ast":null,"code":"import { prop } from '../utils';\nimport Family from '../models/family';\nimport Unit from '../models/unit';\nexport default (store => {\n  return function (childIDs) {\n    const family = new Family(store.getNextId(), 'parent');\n    const cUnit = new Unit(family.id, store.getNodes(childIDs), true);\n    cUnit.nodes.forEach((child, cIndex) => {\n      const parents = store.getNodes(child.parents.map(prop('id'))).sort((a, b) => b.gender !== store.gender ? -1 : 0);\n\n      if (parents.length) {\n        const pUnit = new Unit(family.id, parents);\n        pUnit.size > 1 && cUnit.size > 1 && store.gender === child.gender ? cUnit.shift += 2 : pUnit.shift = cUnit.shift + cIndex * 2;\n        family.pUnits.push(pUnit);\n      }\n    });\n    family.cUnits.push(cUnit);\n    return family;\n  };\n});","map":null,"metadata":{},"sourceType":"module"}