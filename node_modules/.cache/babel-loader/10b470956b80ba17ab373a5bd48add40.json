{"ast":null,"code":"import byParents from './byParents';\nimport arrange from './arrange';\nimport { prop, withType } from '../utils';\nexport default (store => {\n  const createFamily = byParents(store);\n  const arrangeFamily = arrange(store);\n  const root = store.familiesArray.filter(withType('root'));\n\n  for (const rootFamily of root) {\n    let stack = rootFamily.cUnitsWithChildren.reverse();\n\n    while (stack.length) {\n      const familyUnit = stack.pop();\n      const family = createFamily(familyUnit.nodes.map(prop('id')), 'child');\n      const parentFamily = store.getFamily(familyUnit.familyId);\n      family.pID = parentFamily.id;\n      family.top = parentFamily.top + 2;\n      family.left = parentFamily.left + familyUnit.shift;\n      arrangeFamily(family);\n      store.families.set(family.id, family);\n      const nextUnits = family.cUnitsWithChildren;\n      if (nextUnits.length) stack = [...stack, ...nextUnits.reverse()];\n    }\n  }\n\n  return store;\n});","map":{"version":3,"sources":["../../src/children/create.ts"],"names":[],"mappings":"AAAA,OAAO,SAAP,MAAsB,aAAtB;AACA,OAAO,OAAP,MAAoB,WAApB;AACA,SAAS,IAAT,EAAe,QAAf,QAA+B,UAA/B;AAIA,gBAAgB,KAAD,IAAwB;AACrC,QAAM,YAAY,GAAG,SAAS,CAAC,KAAD,CAA9B;AACA,QAAM,aAAa,GAAG,OAAO,CAAC,KAAD,CAA7B;AACA,QAAM,IAAI,GAAG,KAAK,CAAC,aAAN,CAAoB,MAApB,CAA2B,QAAQ,CAAC,MAAD,CAAnC,CAAb;;AAEA,OAAK,MAAM,UAAX,IAAyB,IAAzB,EAA+B;AAC7B,QAAI,KAAK,GAAG,UAAU,CAAC,kBAAX,CAA8B,OAA9B,EAAZ;;AAEA,WAAO,KAAK,CAAC,MAAb,EAAqB;AACnB,YAAM,UAAU,GAAG,KAAK,CAAC,GAAN,EAAnB;AAEA,YAAM,MAAM,GAAG,YAAY,CAAC,UAAU,CAAC,KAAX,CAAiB,GAAjB,CAAqB,IAAI,CAAC,IAAD,CAAzB,CAAD,EAAmC,OAAnC,CAA3B;AACA,YAAM,YAAY,GAAG,KAAK,CAAC,SAAN,CAAgB,UAAU,CAAC,QAA3B,CAArB;AAEA,MAAA,MAAM,CAAC,GAAP,GAAa,YAAY,CAAC,EAA1B;AACA,MAAA,MAAM,CAAC,GAAP,GAAa,YAAY,CAAC,GAAb,GAAmB,CAAhC;AACA,MAAA,MAAM,CAAC,IAAP,GAAc,YAAY,CAAC,IAAb,GAAoB,UAAU,CAAC,KAA7C;AAEA,MAAA,aAAa,CAAC,MAAD,CAAb;AACA,MAAA,KAAK,CAAC,QAAN,CAAe,GAAf,CAAmB,MAAM,CAAC,EAA1B,EAA8B,MAA9B;AAEA,YAAM,SAAS,GAAG,MAAM,CAAC,kBAAzB;AACA,UAAI,SAAS,CAAC,MAAd,EAAsB,KAAK,GAAG,CAAC,GAAG,KAAJ,EAAW,GAAG,SAAS,CAAC,OAAV,EAAd,CAAR;AACvB;AACF;;AAED,SAAO,KAAP;AACD,CA3BD","sourceRoot":"","sourcesContent":["import byParents from './byParents';\nimport arrange from './arrange';\nimport { prop, withType } from '../utils';\nexport default (store) => {\n    const createFamily = byParents(store);\n    const arrangeFamily = arrange(store);\n    const root = store.familiesArray.filter(withType('root'));\n    for (const rootFamily of root) {\n        let stack = rootFamily.cUnitsWithChildren.reverse();\n        while (stack.length) {\n            const familyUnit = stack.pop();\n            const family = createFamily(familyUnit.nodes.map(prop('id')), 'child');\n            const parentFamily = store.getFamily(familyUnit.familyId);\n            family.pID = parentFamily.id;\n            family.top = parentFamily.top + 2;\n            family.left = parentFamily.left + familyUnit.shift;\n            arrangeFamily(family);\n            store.families.set(family.id, family);\n            const nextUnits = family.cUnitsWithChildren;\n            if (nextUnits.length)\n                stack = [...stack, ...nextUnits.reverse()];\n        }\n    }\n    return store;\n};\n//# sourceMappingURL=create.js.map"]},"metadata":{},"sourceType":"module"}