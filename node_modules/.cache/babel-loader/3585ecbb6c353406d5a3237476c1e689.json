{"ast":null,"code":"import { prop, withType, min } from './index';\nexport default (function (store) {\n  var families = store.familiesArray;\n  var vShift = min(families.map(prop('top'))) * -1;\n  if (vShift !== 0) families.forEach(function (family) {\n    return family.top += vShift;\n  });\n  var rootChild = families.find(function (f) {\n    return f.main;\n  });\n  var rootParent = families.find(function (f) {\n    return f.cID === rootChild.id;\n  });\n\n  if (rootParent) {\n    var cUnit = rootChild.pUnits[0];\n    var pUnit = rootParent.cUnits[0];\n    var diff = rootParent.left + pUnit.shift - (rootChild.left + cUnit.shift);\n    if (diff > 0) families.filter(withType('child', 'root')).forEach(function (family) {\n      return family.left += diff;\n    });else if (diff < 0) families.filter(withType('parent')).forEach(function (family) {\n      return family.left += diff * -1;\n    });\n    var hShift = min(families.map(prop('left')));\n    if (hShift > 0) families.forEach(function (family) {\n      return family.left -= hShift;\n    });\n  }\n\n  return store;\n});","map":{"version":3,"sources":["../../src/utils/correctPositions.ts"],"names":[],"mappings":"AAEA,SAAS,IAAT,EAAe,QAAf,EAAyB,GAAzB,QAAoC,SAApC;AAEA,gBAAe,UAAC,KAAD,EAAwB;AACrC,MAAM,QAAQ,GAAG,KAAK,CAAC,aAAvB;AAEA,MAAM,MAAM,GAAG,GAAG,CAAC,QAAQ,CAAC,GAAT,CAAa,IAAI,CAAC,KAAD,CAAjB,CAAD,CAAH,GAAiC,CAAC,CAAjD;AACA,MAAI,MAAM,KAAK,CAAf,EAAkB,QAAQ,CAAC,OAAT,CAAiB,UAAA,MAAM;AAAA,WAAI,MAAM,CAAC,GAAP,IAAc,MAAlB;AAAA,GAAvB;AAElB,MAAM,SAAS,GAAG,QAAQ,CAAC,IAAT,CAAc,UAAA,CAAC;AAAA,WAAI,CAAC,CAAC,IAAN;AAAA,GAAf,CAAlB;AACA,MAAM,UAAU,GAAG,QAAQ,CAAC,IAAT,CAAc,UAAA,CAAC;AAAA,WAAI,CAAC,CAAC,GAAF,KAAU,SAAS,CAAC,EAAxB;AAAA,GAAf,CAAnB;;AAEA,MAAI,UAAJ,EAAgB;AACd,QAAM,KAAK,GAAG,SAAS,CAAC,MAAV,CAAiB,CAAjB,CAAd;AACA,QAAM,KAAK,GAAG,UAAU,CAAC,MAAX,CAAkB,CAAlB,CAAd;AAEA,QAAM,IAAI,GAAI,UAAU,CAAC,IAAX,GAAkB,KAAK,CAAC,KAAzB,IAAmC,SAAS,CAAC,IAAV,GAAiB,KAAK,CAAC,KAA1D,CAAb;AAEA,QAAI,IAAI,GAAG,CAAX,EAAc,QAAQ,CACnB,MADW,CACJ,QAAQ,CAAC,OAAD,EAAU,MAAV,CADJ,EAEX,OAFW,CAEH,UAAA,MAAM;AAAA,aAAI,MAAM,CAAC,IAAP,IAAe,IAAnB;AAAA,KAFH,EAAd,KAGK,IAAI,IAAI,GAAG,CAAX,EAAc,QAAQ,CACxB,MADgB,CACT,QAAQ,CAAC,QAAD,CADC,EAEhB,OAFgB,CAER,UAAA,MAAM;AAAA,aAAI,MAAM,CAAC,IAAP,IAAe,IAAI,GAAG,CAAC,CAA3B;AAAA,KAFE;AAInB,QAAM,MAAM,GAAG,GAAG,CAAC,QAAQ,CAAC,GAAT,CAAa,IAAI,CAAC,MAAD,CAAjB,CAAD,CAAlB;AACA,QAAI,MAAM,GAAG,CAAb,EAAgB,QAAQ,CAAC,OAAT,CAAiB,UAAA,MAAM;AAAA,aAAI,MAAM,CAAC,IAAP,IAAe,MAAnB;AAAA,KAAvB;AACjB;;AAED,SAAO,KAAP;AACD,CA3BD","sourceRoot":"","sourcesContent":["import { prop, withType, min } from './index';\nexport default (store) => {\n    const families = store.familiesArray;\n    const vShift = min(families.map(prop('top'))) * -1;\n    if (vShift !== 0)\n        families.forEach(family => family.top += vShift);\n    const rootChild = families.find(f => f.main);\n    const rootParent = families.find(f => f.cID === rootChild.id);\n    if (rootParent) {\n        const cUnit = rootChild.pUnits[0];\n        const pUnit = rootParent.cUnits[0];\n        const diff = (rootParent.left + pUnit.shift) - (rootChild.left + cUnit.shift);\n        if (diff > 0)\n            families\n                .filter(withType('child', 'root'))\n                .forEach(family => family.left += diff);\n        else if (diff < 0)\n            families\n                .filter(withType('parent'))\n                .forEach(family => family.left += diff * -1);\n        const hShift = min(families.map(prop('left')));\n        if (hShift > 0)\n            families.forEach(family => family.left -= hShift);\n    }\n    return store;\n};\n//# sourceMappingURL=correctPositions.js.map"]},"metadata":{},"sourceType":"module"}