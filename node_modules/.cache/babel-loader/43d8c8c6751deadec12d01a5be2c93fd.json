{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\lianne\\\\mygit\\\\familyancestry\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _createForOfIteratorHelper from \"C:\\\\Users\\\\lianne\\\\mygit\\\\familyancestry\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";\nimport byParents from './byParents';\nimport arrange from './arrange';\nimport { prop, withType } from '../utils';\nexport default (function (store) {\n  var createFamily = byParents(store);\n  var arrangeFamily = arrange(store);\n  var root = store.familiesArray.filter(withType('root'));\n\n  var _iterator = _createForOfIteratorHelper(root),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var rootFamily = _step.value;\n      var stack = rootFamily.cUnitsWithChildren.reverse();\n\n      while (stack.length) {\n        var familyUnit = stack.pop();\n        var family = createFamily(familyUnit.nodes.map(prop('id')), 'child');\n        var parentFamily = store.getFamily(familyUnit.familyId);\n        family.pID = parentFamily.id;\n        family.top = parentFamily.top + 2;\n        family.left = parentFamily.left + familyUnit.shift;\n        arrangeFamily(family);\n        store.families.set(family.id, family);\n        var nextUnits = family.cUnitsWithChildren;\n        if (nextUnits.length) stack = [].concat(_toConsumableArray(stack), _toConsumableArray(nextUnits.reverse()));\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return store;\n});","map":{"version":3,"sources":["../../src/children/create.ts"],"names":[],"mappings":";;AAAA,OAAO,SAAP,MAAsB,aAAtB;AACA,OAAO,OAAP,MAAoB,WAApB;AACA,SAAS,IAAT,EAAe,QAAf,QAA+B,UAA/B;AAIA,gBAAe,UAAC,KAAD,EAAwB;AACrC,MAAM,YAAY,GAAG,SAAS,CAAC,KAAD,CAA9B;AACA,MAAM,aAAa,GAAG,OAAO,CAAC,KAAD,CAA7B;AACA,MAAM,IAAI,GAAG,KAAK,CAAC,aAAN,CAAoB,MAApB,CAA2B,QAAQ,CAAC,MAAD,CAAnC,CAAb;;AAHqC,6CAKZ,IALY;AAAA;;AAAA;AAKrC,wDAA+B;AAAA,UAApB,UAAoB;AAC7B,UAAI,KAAK,GAAG,UAAU,CAAC,kBAAX,CAA8B,OAA9B,EAAZ;;AAEA,aAAO,KAAK,CAAC,MAAb,EAAqB;AACnB,YAAM,UAAU,GAAG,KAAK,CAAC,GAAN,EAAnB;AAEA,YAAM,MAAM,GAAG,YAAY,CAAC,UAAU,CAAC,KAAX,CAAiB,GAAjB,CAAqB,IAAI,CAAC,IAAD,CAAzB,CAAD,EAAmC,OAAnC,CAA3B;AACA,YAAM,YAAY,GAAG,KAAK,CAAC,SAAN,CAAgB,UAAU,CAAC,QAA3B,CAArB;AAEA,QAAA,MAAM,CAAC,GAAP,GAAa,YAAY,CAAC,EAA1B;AACA,QAAA,MAAM,CAAC,GAAP,GAAa,YAAY,CAAC,GAAb,GAAmB,CAAhC;AACA,QAAA,MAAM,CAAC,IAAP,GAAc,YAAY,CAAC,IAAb,GAAoB,UAAU,CAAC,KAA7C;AAEA,QAAA,aAAa,CAAC,MAAD,CAAb;AACA,QAAA,KAAK,CAAC,QAAN,CAAe,GAAf,CAAmB,MAAM,CAAC,EAA1B,EAA8B,MAA9B;AAEA,YAAM,SAAS,GAAG,MAAM,CAAC,kBAAzB;AACA,YAAI,SAAS,CAAC,MAAd,EAAsB,KAAK,gCAAO,KAAP,sBAAiB,SAAS,CAAC,OAAV,EAAjB,EAAL;AACvB;AACF;AAxBoC;AAAA;AAAA;AAAA;AAAA;;AA0BrC,SAAO,KAAP;AACD,CA3BD","sourceRoot":"","sourcesContent":["import byParents from './byParents';\nimport arrange from './arrange';\nimport { prop, withType } from '../utils';\nexport default (store) => {\n    const createFamily = byParents(store);\n    const arrangeFamily = arrange(store);\n    const root = store.familiesArray.filter(withType('root'));\n    for (const rootFamily of root) {\n        let stack = rootFamily.cUnitsWithChildren.reverse();\n        while (stack.length) {\n            const familyUnit = stack.pop();\n            const family = createFamily(familyUnit.nodes.map(prop('id')), 'child');\n            const parentFamily = store.getFamily(familyUnit.familyId);\n            family.pID = parentFamily.id;\n            family.top = parentFamily.top + 2;\n            family.left = parentFamily.left + familyUnit.shift;\n            arrangeFamily(family);\n            store.families.set(family.id, family);\n            const nextUnits = family.cUnitsWithChildren;\n            if (nextUnits.length)\n                stack = [...stack, ...nextUnits.reverse()];\n        }\n    }\n    return store;\n};\n//# sourceMappingURL=create.js.map"]},"metadata":{},"sourceType":"module"}