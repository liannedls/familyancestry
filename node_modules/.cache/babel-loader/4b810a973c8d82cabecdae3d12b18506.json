{"ast":null,"code":"import byChildren from './byChildren';\nimport arrange from './arrange';\nimport { prop, withType } from '../utils';\nexport default (store => {\n  const createFamily = byChildren(store);\n  const arrangeFamily = arrange(store);\n  const root = store.familiesArray.filter(withType('root'));\n\n  for (const rootFamily of root) {\n    if (!rootFamily.main) continue;\n    let stack = rootFamily.pUnitsWithParents.reverse();\n\n    while (stack.length) {\n      const familyUnit = stack.pop();\n      const family = createFamily(familyUnit.nodes.map(prop('id')));\n      const childFamily = store.getFamily(familyUnit.familyId);\n      family.cID = childFamily.id;\n      family.top = childFamily.top - 2;\n      family.left = childFamily.left + familyUnit.shift;\n      arrangeFamily(family);\n      store.families.set(family.id, family);\n      const nextUnits = family.pUnitsWithParents;\n      if (nextUnits.length) stack = [...stack, ...nextUnits.reverse()];\n    }\n  }\n\n  return store;\n});","map":{"version":3,"sources":["../../src/parents/create.ts"],"names":[],"mappings":"AAAA,OAAO,UAAP,MAAuB,cAAvB;AACA,OAAO,OAAP,MAAoB,WAApB;AACA,SAAS,IAAT,EAAe,QAAf,QAA+B,UAA/B;AAIA,gBAAgB,KAAD,IAAwB;AACrC,QAAM,YAAY,GAAG,UAAU,CAAC,KAAD,CAA/B;AACA,QAAM,aAAa,GAAG,OAAO,CAAC,KAAD,CAA7B;AACA,QAAM,IAAI,GAAG,KAAK,CAAC,aAAN,CAAoB,MAApB,CAA2B,QAAQ,CAAC,MAAD,CAAnC,CAAb;;AAEA,OAAK,MAAM,UAAX,IAAyB,IAAzB,EAA+B;AAC7B,QAAI,CAAC,UAAU,CAAC,IAAhB,EAAsB;AACtB,QAAI,KAAK,GAAG,UAAU,CAAC,iBAAX,CAA6B,OAA7B,EAAZ;;AAEA,WAAO,KAAK,CAAC,MAAb,EAAqB;AACnB,YAAM,UAAU,GAAS,KAAK,CAAC,GAAN,EAAzB;AAEA,YAAM,MAAM,GAAG,YAAY,CAAC,UAAU,CAAC,KAAX,CAAiB,GAAjB,CAAqB,IAAI,CAAC,IAAD,CAAzB,CAAD,CAA3B;AACA,YAAM,WAAW,GAAG,KAAK,CAAC,SAAN,CAAgB,UAAU,CAAC,QAA3B,CAApB;AAEA,MAAA,MAAM,CAAC,GAAP,GAAa,WAAW,CAAC,EAAzB;AACA,MAAA,MAAM,CAAC,GAAP,GAAa,WAAW,CAAC,GAAZ,GAAkB,CAA/B;AACA,MAAA,MAAM,CAAC,IAAP,GAAc,WAAW,CAAC,IAAZ,GAAmB,UAAU,CAAC,KAA5C;AAEA,MAAA,aAAa,CAAC,MAAD,CAAb;AACA,MAAA,KAAK,CAAC,QAAN,CAAe,GAAf,CAAmB,MAAM,CAAC,EAA1B,EAA8B,MAA9B;AAEA,YAAM,SAAS,GAAG,MAAM,CAAC,iBAAzB;AACA,UAAI,SAAS,CAAC,MAAd,EAAsB,KAAK,GAAG,CAAC,GAAG,KAAJ,EAAW,GAAG,SAAS,CAAC,OAAV,EAAd,CAAR;AACvB;AACF;;AAED,SAAO,KAAP;AACD,CA5BD","sourceRoot":"","sourcesContent":["import byChildren from './byChildren';\nimport arrange from './arrange';\nimport { prop, withType } from '../utils';\nexport default (store) => {\n    const createFamily = byChildren(store);\n    const arrangeFamily = arrange(store);\n    const root = store.familiesArray.filter(withType('root'));\n    for (const rootFamily of root) {\n        if (!rootFamily.main)\n            continue;\n        let stack = rootFamily.pUnitsWithParents.reverse();\n        while (stack.length) {\n            const familyUnit = stack.pop();\n            const family = createFamily(familyUnit.nodes.map(prop('id')));\n            const childFamily = store.getFamily(familyUnit.familyId);\n            family.cID = childFamily.id;\n            family.top = childFamily.top - 2;\n            family.left = childFamily.left + familyUnit.shift;\n            arrangeFamily(family);\n            store.families.set(family.id, family);\n            const nextUnits = family.pUnitsWithParents;\n            if (nextUnits.length)\n                stack = [...stack, ...nextUnits.reverse()];\n        }\n    }\n    return store;\n};\n//# sourceMappingURL=create.js.map"]},"metadata":{},"sourceType":"module"}