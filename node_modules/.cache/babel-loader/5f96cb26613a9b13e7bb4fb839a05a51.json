{"ast":null,"code":"import setUnitDefShifts from '../utils/setUnitDefShifts';\nimport { prop, withId } from '../utils';\nexport default ((lFamily, rFamily) => {\n  const lChildren = lFamily.cUnits.reduce((a, b) => a.concat(b.nodes), []);\n  const rChildren = rFamily.cUnits.reduce((a, b) => a.concat(b.nodes), []);\n  const ids = lChildren.filter(node => !!rChildren.find(withId(node.id))).map(prop('id'));\n  const shifts = lFamily.cUnits.map(prop('shift'));\n  lFamily.cUnits = lFamily.cUnits.sort((a, b) => {\n    const foundA = !!a.nodes.find(node => ids.indexOf(node.id) !== -1);\n    const foundB = !!b.nodes.find(node => ids.indexOf(node.id) !== -1);\n    if (foundA && !foundB) return 1;else if (!foundA && foundB) return -1;\n    return 0;\n  });\n  lFamily.cUnits.forEach((unit, idx) => unit.shift = shifts[idx]);\n  rFamily.cUnits = rFamily.cUnits.filter(unit => !!unit.nodes.find(node => ids.indexOf(node.id) === -1));\n  setUnitDefShifts(rFamily);\n});","map":null,"metadata":{},"sourceType":"module"}