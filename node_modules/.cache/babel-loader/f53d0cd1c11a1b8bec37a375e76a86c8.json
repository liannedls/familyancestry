{"ast":null,"code":"import { prop } from '../utils';\nimport Family from '../models/family';\nimport Unit from '../models/unit';\nexport default (store => {\n  return function (childIDs) {\n    const family = new Family(store.getNextId(), 'parent');\n    const cUnit = new Unit(family.id, store.getNodes(childIDs), true);\n    cUnit.nodes.forEach((child, cIndex) => {\n      const parents = store.getNodes(child.parents.map(prop('id'))).sort((a, b) => b.gender !== store.gender ? -1 : 0);\n\n      if (parents.length) {\n        const pUnit = new Unit(family.id, parents);\n        pUnit.size > 1 && cUnit.size > 1 && store.gender === child.gender ? cUnit.shift += 2 : pUnit.shift = cUnit.shift + cIndex * 2;\n        family.pUnits.push(pUnit);\n      }\n    });\n    family.cUnits.push(cUnit);\n    return family;\n  };\n});","map":{"version":3,"sources":["../../src/parents/byChildren.ts"],"names":[],"mappings":"AAAA,SAAS,IAAT,QAAqB,UAArB;AAEA,OAAO,MAAP,MAAmB,kBAAnB;AACA,OAAO,IAAP,MAAiB,gBAAjB;AAEA,gBAAgB,KAAD,IAAiB;AAC9B,SAAO,UAAU,QAAV,EAA4B;AACjC,UAAM,MAAM,GAAG,IAAI,MAAJ,CAAW,KAAK,CAAC,SAAN,EAAX,EAA8B,QAA9B,CAAf;AACA,UAAM,KAAK,GAAG,IAAI,IAAJ,CAAS,MAAM,CAAC,EAAhB,EAAoB,KAAK,CAAC,QAAN,CAAe,QAAf,CAApB,EAA8C,IAA9C,CAAd;AAEA,IAAA,KAAK,CAAC,KAAN,CAAY,OAAZ,CAAoB,CAAC,KAAD,EAAQ,MAAR,KAAkB;AACpC,YAAM,OAAO,GAAG,KAAK,CAClB,QADa,CACJ,KAAK,CAAC,OAAN,CAAc,GAAd,CAAkB,IAAI,CAAC,IAAD,CAAtB,CADI,EAEb,IAFa,CAER,CAAC,CAAD,EAAI,CAAJ,KAAW,CAAC,CAAC,MAAF,KAAa,KAAK,CAAC,MAApB,GAA8B,CAAC,CAA/B,GAAmC,CAFrC,CAAhB;;AAIA,UAAI,OAAO,CAAC,MAAZ,EAAoB;AAClB,cAAM,KAAK,GAAG,IAAI,IAAJ,CAAS,MAAM,CAAC,EAAhB,EAAoB,OAApB,CAAd;AAEA,QAAA,KAAK,CAAC,IAAN,GAAa,CAAb,IAAkB,KAAK,CAAC,IAAN,GAAa,CAA/B,IAAoC,KAAK,CAAC,MAAN,KAAiB,KAAK,CAAC,MAA3D,GACI,KAAK,CAAC,KAAN,IAAe,CADnB,GAEI,KAAK,CAAC,KAAN,GAAc,KAAK,CAAC,KAAN,GAAc,MAAM,GAAG,CAFzC;AAIA,QAAA,MAAM,CAAC,MAAP,CAAc,IAAd,CAAmB,KAAnB;AACD;AACF,KAdD;AAgBA,IAAA,MAAM,CAAC,MAAP,CAAc,IAAd,CAAmB,KAAnB;AACA,WAAO,MAAP;AACD,GAtBD;AAuBD,CAxBD","sourceRoot":"","sourcesContent":["import { prop } from '../utils';\nimport Family from '../models/family';\nimport Unit from '../models/unit';\nexport default (store) => {\n    return function (childIDs) {\n        const family = new Family(store.getNextId(), 'parent');\n        const cUnit = new Unit(family.id, store.getNodes(childIDs), true);\n        cUnit.nodes.forEach((child, cIndex) => {\n            const parents = store\n                .getNodes(child.parents.map(prop('id')))\n                .sort((a, b) => (b.gender !== store.gender) ? -1 : 0);\n            if (parents.length) {\n                const pUnit = new Unit(family.id, parents);\n                pUnit.size > 1 && cUnit.size > 1 && store.gender === child.gender\n                    ? cUnit.shift += 2\n                    : pUnit.shift = cUnit.shift + cIndex * 2;\n                family.pUnits.push(pUnit);\n            }\n        });\n        family.cUnits.push(cUnit);\n        return family;\n    };\n};\n//# sourceMappingURL=byChildren.js.map"]},"metadata":{},"sourceType":"module"}